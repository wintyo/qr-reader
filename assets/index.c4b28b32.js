import{d as e,r as t,o as a,a as n,j as o,c as s,b as r,w as i,p as d,e as c,f as l,g as u,h as v,t as m,i as p,v as f,n as h,k as g}from"./vendor.a4c17d06.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const r=new URL(e,n);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const i=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){s(new Error(`Failed to import: ${e}`)),o(d)},onload(){a(self[t].moduleMap[r]),o(d)}});document.head.appendChild(d)})),self[t].moduleMap={}}}("assets/");var w=e({name:"QRReader",emits:{scan:e=>!!e},setup(e,s){let r;const i=t(),d=document.createElement("canvas");return a((async()=>{if(!i.value)return;const e=i.value;e.srcObject=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}),e.setAttribute("playsinline","true"),e.onloadedmetadata=()=>{e.play(),console.log(`video resolution: ${e.videoWidth} x ${e.videoHeight}`),d.width=e.videoWidth,d.height=e.videoHeight},r=setInterval((()=>{(()=>{const e=i.value;if(!e)return;const t=d.getContext("2d");if(null==t)return;t.drawImage(e,0,0,d.width,d.height);const a=t.getImageData(0,0,d.width,d.height),n=o(a.data,d.width,d.height);n&&s.emit("scan",n.data)})()}),200)})),n((()=>{clearInterval(r),d.remove(),i.value&&i.value.srcObject&&"getVideoTracks"in i.value.srcObject&&i.value.srcObject.getVideoTracks()[0].stop()})),{elVideoRef:i}}});const R=i();d("data-v-0cbd2994");const b={class:"video",ref:"elVideoRef"};c();const j=R(((e,t,a,n,o,i)=>(l(),s("div",null,[r("video",b,null,512)]))));w.render=j,w.__scopeId="data-v-0cbd2994";var U=e({name:"App",components:{QRReader:w},setup(){const e=u({qrCode:""}),t=v((()=>/^https?:\/\//.test(e.qrCode)));return{state:e,isUrl:t,onScan:t=>{console.log(t),e.qrCode=t}}}});const y=i();d("data-v-f02ccecc");const L={class:"box"},_={class:"info"},k=r("div",null,"QRデータ:",-1),C={key:1};c();const O=y(((e,t,a,n,o,i)=>{const d=p("QRReader");return l(),s("div",null,[r("div",L,[r(d,{onScan:e.onScan},null,8,["onScan"]),r("div",_,[k,e.isUrl?(l(),s("a",{key:0,href:e.state.qrCode,target:"_blank"},m(e.state.qrCode),9,["href"])):(l(),s("p",C,m(e.state.qrCode),1))])])])}));U.render=O,U.__scopeId="data-v-f02ccecc",function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:n}=e;let o,s;if("serviceWorker"in navigator){o=new f("sw.js",{scope:"./"}),o.addEventListener("activated",(e=>{e.isUpdate||null==n||n()}));{const e=()=>{null==a||a()};o.addEventListener("waiting",e),o.addEventListener("externalwaiting",e)}o.register({immediate:t}).then((e=>s=e))}}(),g(U).mount("#app");
